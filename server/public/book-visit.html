<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Book a Visit - √ñfverg√•rds</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body {
            background-color: #fdfbf7;
            font-family: 'Georgia', serif;
        }

        .font-sans {
            font-family: system-ui, -apple-system, sans-serif;
        }

        .btn-primary {
            background-color: #4a6741;
            color: white;
        }

        .btn-primary:hover {
            background-color: #3d5535;
        }

        .btn-outline {
            border: 2px solid #4a6741;
            color: #4a6741;
        }

        .btn-outline:hover {
            background-color: #4a6741;
            color: white;
        }

        .text-green-brand {
            color: #4a6741;
        }

        .bg-green-brand {
            background-color: #4a6741;
        }

        .bg-warm {
            background-color: #f9f6f1;
        }

        .bg-warm-dark {
            background-color: #f0ebe3;
        }

        /* Slot styling */
        .slot-card {
            border: 1px solid #e5e7eb;
            transition: all 0.2s;
        }

        .slot-card:hover {
            border-color: #4a6741;
            background-color: #f0fdf4;
            cursor: pointer;
        }

        .slot-card.selected {
            border-color: #4a6741;
            background-color: #dcfce7;
            box-shadow: 0 0 0 2px #4a6741;
        }
    </style>
    <!-- Flatpickr -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/flatpickr/dist/flatpickr.min.css">
    <script src="https://cdn.jsdelivr.net/npm/flatpickr"></script>
    <script src="https://npmcdn.com/flatpickr/dist/l10n/sv.js"></script>
</head>

<body class="text-gray-800 min-h-screen flex flex-col">
    <!-- Navigation: Simple Mode -->
    <nav id="simpleHeader" class="bg-white/80 backdrop-blur-sm sticky top-0 z-50 border-b border-gray-100">
        <div class="max-w-5xl mx-auto px-6 py-4">
            <div class="flex justify-between items-center">
                <a href="/" class="text-xl font-bold text-green-brand">
                    üçé √ñfverg√•rds
                </a>

                <!-- Mobile menu button -->
                <button id="menuBtn" class="md:hidden p-2 text-gray-600" onclick="toggleMenu()">
                    <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                            d="M4 6h16M4 12h16M4 18h16" />
                    </svg>
                </button>

                <!-- Desktop Navigation -->
                <div class="hidden md:flex items-center gap-6">
                    <a href="/"
                        class="text-sm font-sans text-gray-600 hover:text-green-brand transition-colors">Home</a>
                </div>
            </div>

            <!-- Mobile Navigation -->
            <div id="mobileMenu" class="hidden md:hidden pt-4 pb-2 border-t mt-4">
                <div class="flex flex-col gap-3">
                    <a href="/" class="text-sm font-sans text-gray-600 hover:text-green-brand">Home</a>
                </div>
            </div>
        </div>
    </nav>

    <!-- Navigation: Original Mode (Replica) -->
    <nav id="originalHeader" class="hidden sticky top-0 z-50"
        style="background-color: #751C1E; font-family: system-ui, sans-serif;">
        <div class="max-w-6xl mx-auto px-4 py-4">
            <div class="flex flex-col md:flex-row items-center justify-between gap-4">
                <!-- Logo -->
                <div class="flex-shrink-0">
                    <a href="/">
                        <img src="https://i0.wp.com/ofvergards.ax/wp-content/uploads/2020/08/%C3%96fverg%C3%A5rds_logo.png?fit=557%2C600&ssl=1"
                            alt="√ñfverg√•rds" class="h-16 w-auto">
                    </a>
                </div>

                <!-- Desktop Links (Mirrored) -->
                <div
                    class="hidden md:flex flex-wrap justify-center gap-6 text-sm uppercase font-bold tracking-wide text-white">
                    <a href="/"
                        class="hover:text-gray-200 hover:underline decoration-[#D85F31] decoration-[3px] underline-offset-[6px] transition-colors">Start</a>
                    <a href="/om-oss/"
                        class="hover:text-gray-200 hover:underline decoration-[#D85F31] decoration-[3px] underline-offset-[6px] transition-colors">Om
                        oss</a>
                    <a href="/gardsbesok/"
                        class="hover:text-gray-200 hover:underline decoration-[#D85F31] decoration-[3px] underline-offset-[6px] transition-colors">G√•rdsbes√∂k</a>
                    <a href="/vara-produkter/"
                        class="hover:text-gray-200 hover:underline decoration-[#D85F31] decoration-[3px] underline-offset-[6px] transition-colors">V√•ra
                        produkter</a>
                    <a href="/mitt-appeltrad/index.html"
                        class="hover:text-gray-200 hover:underline decoration-[#D85F31] decoration-[3px] underline-offset-[6px] transition-colors">Mitt
                        √§ppeltr√§d</a>
                    <a href="/kontakta-oss/"
                        class="hover:text-gray-200 hover:underline decoration-[#D85F31] decoration-[3px] underline-offset-[6px] transition-colors">Kontakta
                        oss</a>
                </div>
                <!-- Mobile toggle for original? Keeping it simple for now, just stacking -->
                <div class="md:hidden text-white text-xs uppercase tracking-widest">
                    MENU
                </div>
            </div>
        </div>
    </nav>

    <!-- Main Content -->
    <main class="flex-1">
        <div class="max-w-4xl mx-auto p-6">
            <header class="mb-8 text-center">
                <h1 id="pageTitle" class="text-3xl md:text-4xl font-bold text-green-brand mb-2">Book a Visit</h1>
                <p class="text-lg text-gray-600">Experience √ñfverg√•rds first hand.</p>
            </header>

            <div id="bookingContainer" class="bg-white p-8 rounded-xl shadow-sm border border-gray-100">

                <!-- Step 1: Activity Selection (if not provided) -->
                <div id="step-activity" class="mb-6">
                    <label class="block text-sm font-medium mb-3 font-sans">Choose Experience</label>
                    <div class="grid grid-cols-1 gap-3">
                        <button onclick="selectActivity('safari')"
                            class="p-4 border rounded-lg text-left hover:bg-green-50 transition-colors flex justify-between items-center group">
                            <div>
                                <span class="font-bold text-green-900 block">Apple Safari</span>
                                <span class="text-sm text-gray-500">Guided tour through the orchard</span>
                            </div>
                            <span class="text-green-brand opacity-0 group-hover:opacity-100 transition-opacity">‚Üí</span>
                        </button>
                        <button onclick="selectActivity('tasting')"
                            class="p-4 border rounded-lg text-left hover:bg-green-50 transition-colors flex justify-between items-center group">
                            <div>
                                <span class="font-bold text-green-900 block">Must Tasting</span>
                                <span class="text-sm text-gray-500">Sample our finest apple juices</span>
                            </div>
                            <span class="text-green-brand opacity-0 group-hover:opacity-100 transition-opacity">‚Üí</span>
                        </button>
                        <button onclick="selectActivity('picnic')"
                            class="p-4 border rounded-lg text-left hover:bg-green-50 transition-colors flex justify-between items-center group">
                            <div>
                                <span class="font-bold text-green-900 block">Picnic</span>
                                <span class="text-sm text-gray-500">Relax among the apple trees</span>
                            </div>
                            <span class="text-green-brand opacity-0 group-hover:opacity-100 transition-opacity">‚Üí</span>
                        </button>
                    </div>
                </div>

                <!-- Step 2: Date Selection (Calendar + Slots) -->
                <div id="step-slots" class="hidden">
                    <div class="flex items-center justify-between mb-4">
                        <h2 class="text-lg font-semibold font-sans">Select a Date & Time</h2>
                        <button onclick="changeActivity()"
                            class="text-sm text-gray-500 hover:text-green-brand underline">Change</button>
                    </div>

                    <div class="grid grid-cols-1 md:grid-cols-2 gap-8 mb-6">
                        <!-- Calendar Container -->
                        <div class="flex justify-center md:justify-start">
                            <input type="text" id="datePicker" class="hidden">
                            <!-- Hidden input for Flatpickr -->
                            <div id="calendarContainer"></div>
                        </div>

                        <!-- Time Slots Container -->
                        <div>
                            <h3 id="selectedDateTitle" class="text-sm font-medium text-gray-500 mb-3 font-sans">
                                Available Times</h3>
                            <div id="slotsList" class="space-y-3">
                                <!-- Slots injected here -->
                                <div class="text-gray-400 text-sm italic">Select a date to see times</div>
                            </div>
                        </div>
                    </div>

                    <div class="text-center pt-4 border-t border-gray-100">
                        <p class="text-sm text-gray-600 mb-2">Can't find a suitable time?</p>
                        <button onclick="showInquiryForm()"
                            class="text-green-brand font-medium hover:underline text-sm">
                            Request a private booking
                        </button>
                    </div>
                </div>

                <!-- Step 3: Visitor Details -->
                <form id="detailsForm" class="hidden space-y-4">
                    <div class="bg-green-50 p-4 rounded-lg mb-4 flex justify-between items-center">
                        <div>
                            <span class="block text-xs uppercase text-green-800 font-bold tracking-wider">Selected
                                Time</span>
                            <span id="selectedTimeDisplay" class="font-medium text-green-900 font-sans">-</span>
                        </div>
                        <button type="button" onclick="backToSlots()"
                            class="text-xs text-green-700 underline">Change</button>
                    </div>

                    <input type="hidden" id="slotId" name="slotId">

                    <div>
                        <label class="block text-sm font-medium mb-1 font-sans">Number of Guests</label>
                        <input type="number" id="visitQty" min="1" max="10" value="1" required
                            class="w-full border p-3 rounded-lg focus:ring-2 focus:ring-green-200 outline-none font-sans">
                        <p id="qtyHelp" class="text-xs text-gray-500 mt-1"></p>
                    </div>

                    <div>
                        <label class="block text-sm font-medium mb-1 font-sans">Your Name</label>
                        <input type="text" id="visitName" required
                            class="w-full border p-3 rounded-lg focus:ring-2 focus:ring-green-200 outline-none font-sans">
                    </div>

                    <div>
                        <label class="block text-sm font-medium mb-1 font-sans">Email Address</label>
                        <input type="email" id="visitEmail" required
                            class="w-full border p-3 rounded-lg focus:ring-2 focus:ring-green-200 outline-none font-sans">
                    </div>

                    <div>
                        <label class="block text-sm font-medium mb-1 font-sans">Phone Number</label>
                        <input type="tel" id="visitPhone"
                            class="w-full border p-3 rounded-lg focus:ring-2 focus:ring-green-200 outline-none font-sans"
                            placeholder="+358 40 1234567">
                    </div>

                    <div>
                        <label class="block text-sm font-medium mb-1 font-sans">Country (Optional)</label>
                        <select id="visitCountry"
                            class="w-full border p-3 rounded-lg focus:ring-2 focus:ring-green-200 outline-none font-sans bg-white">
                            <option value="" disabled selected>Select a country</option>
                            <option value="√Öland">√Öland</option>
                            <option value="Finland">Finland</option>
                            <option value="Sweden">Sweden</option>
                            <option value="Other">Other</option>
                        </select>
                    </div>

                    <div class="pt-4">
                        <button type="submit" id="bookVisitBtn"
                            class="w-full btn-primary py-4 rounded-lg font-semibold transition-all shadow-md text-lg font-sans">
                            Book & Pay
                        </button>
                    </div>
                </form>

                <!-- Step 4: Inquiry Form -->
                <form id="inquiryForm" class="hidden space-y-4">
                    <div class="mb-4">
                        <button type="button" onclick="backToSlots()"
                            class="text-sm text-gray-500 hover:text-green-brand flex items-center gap-1">
                            <span>‚Üê</span> Back to times
                        </button>
                    </div>

                    <h2 class="text-lg font-semibold font-sans mb-4">Request Private Booking</h2>
                    <input type="hidden" id="inquiryActivity">

                    <div>
                        <label class="block text-sm font-medium mb-1 font-sans">Preferred Date & Time</label>
                        <input type="text" id="inquiryDate" required placeholder="e.g. July 15th afternoon"
                            class="w-full border p-3 rounded-lg focus:ring-2 focus:ring-green-200 outline-none font-sans">
                    </div>

                    <div>
                        <label class="block text-sm font-medium mb-1 font-sans">Your Name</label>
                        <input type="text" id="inquiryName" required
                            class="w-full border p-3 rounded-lg focus:ring-2 focus:ring-green-200 outline-none font-sans">
                    </div>

                    <div>
                        <label class="block text-sm font-medium mb-1 font-sans">Email Address</label>
                        <input type="email" id="inquiryEmail" required
                            class="w-full border p-3 rounded-lg focus:ring-2 focus:ring-green-200 outline-none font-sans">
                    </div>

                    <div>
                        <label class="block text-sm font-medium mb-1 font-sans">Message (Optional)</label>
                        <textarea id="inquiryMessage" rows="3"
                            class="w-full border p-3 rounded-lg focus:ring-2 focus:ring-green-200 outline-none font-sans"></textarea>
                    </div>

                    <div class="pt-2">
                        <button type="submit" id="sendInquiryBtn"
                            class="w-full btn-primary py-3 rounded-lg font-semibold transition-all shadow-md font-sans">
                            Send Request
                        </button>
                    </div>
                </form>

            </div>
        </div>
    </main>

    <!-- Footer -->
    <footer class="bg-warm-dark border-t border-gray-200 mt-16">
        <div class="max-w-5xl mx-auto px-6 py-12">
            <div class="text-center">
                <p class="text-green-brand font-bold text-lg mb-2">√ñfverg√•rds</p>
                <p class="text-sm text-gray-500 font-sans">√Öland archipelago, Finland</p>
                <p class="text-xs text-gray-400 font-sans mt-4">
                    A small family farm sharing nature, apples, and quiet moments.
                </p>
            </div>
        </div>
    </footer>


    <!-- Header Switcher Toggle -->
    <button id="headerToggleBtn" onclick="toggleHeaderMode()"
        class="fixed bottom-4 right-4 bg-white border border-gray-200 shadow-lg p-3 rounded-full text-xs text-gray-500 hover:bg-gray-50 z-50 pointer-events-auto transition-transform hover:scale-110"
        title="Switch Style">
        üîÑ
    </button>

    <script>
        function toggleMenu() {
            const menu = document.getElementById('mobileMenu');
            menu.classList.toggle('hidden');
        }

        // Header Switch Logic
        function toggleHeaderMode() {
            const simpleHeader = document.getElementById('simpleHeader');
            const originalHeader = document.getElementById('originalHeader');

            if (simpleHeader.classList.contains('hidden')) {
                // Switch to Simple
                simpleHeader.classList.remove('hidden');
                originalHeader.classList.add('hidden');
                localStorage.setItem('headerMode', 'simple');
            } else {
                // Switch to Original
                simpleHeader.classList.add('hidden');
                originalHeader.classList.remove('hidden');
                localStorage.setItem('headerMode', 'original');
            }
        }

        // Init Header Mode
        document.addEventListener('DOMContentLoaded', () => {
            const mode = localStorage.getItem('headerMode');
            if (mode === 'original') {
                document.getElementById('simpleHeader').classList.add('hidden');
                document.getElementById('originalHeader').classList.remove('hidden');
            }
            populateCountries('visitCountry'); // Populate visit form country list
        });

        const allCountries = [
            "Afghanistan", "Albania", "Algeria", "Andorra", "Angola", "Antigua and Barbuda", "Argentina", "Armenia", "Australia", "Austria", "Azerbaijan",
            "Bahamas", "Bahrain", "Bangladesh", "Barbados", "Belarus", "Belgium", "Belize", "Benin", "Bhutan", "Bolivia", "Bosnia and Herzegovina", "Botswana", "Brazil", "Brunei", "Bulgaria", "Burkina Faso", "Burundi",
            "Cabo Verde", "Cambodia", "Cameroon", "Canada", "Central African Republic", "Chad", "Chile", "China", "Colombia", "Comoros", "Congo (Crazzaville)", "Congo (Kinshasa)", "Costa Rica", "Cote d'Ivoire", "Croatia", "Cuba", "Cyprus", "Czechia",
            "Denmark", "Djibouti", "Dominica", "Dominican Republic",
            "Ecuador", "Egypt", "El Salvador", "Equatorial Guinea", "Eritrea", "Estonia", "Eswatini", "Ethiopia",
            "Fiji", "France",
            "Gabon", "Gambia", "Georgia", "Germany", "Ghana", "Greece", "Grenada", "Guatemala", "Guinea", "Guinea-Bissau", "Guyana",
            "Haiti", "Honduras", "Hungary",
            "Iceland", "India", "Indonesia", "Iran", "Iraq", "Ireland", "Israel", "Italy",
            "Jamaica", "Japan", "Jordan",
            "Kazakhstan", "Kenya", "Kiribati", "Kosovo", "Kuwait", "Kyrgyzstan",
            "Laos", "Latvia", "Lebanon", "Lesotho", "Liberia", "Libya", "Liechtenstein", "Lithuania", "Luxembourg",
            "Madagascar", "Malawi", "Malaysia", "Maldives", "Mali", "Malta", "Marshall Islands", "Mauritania", "Mauritius", "Mexico", "Micronesia", "Moldova", "Monaco", "Mongolia", "Montenegro", "Morocco", "Mozambique", "Myanmar",
            "Namibia", "Nauru", "Nepal", "Netherlands", "New Zealand", "Nicaragua", "Niger", "Nigeria", "North Korea", "North Macedonia", "Norway",
            "Oman",
            "Pakistan", "Palau", "Palestine State", "Panama", "Papua New Guinea", "Paraguay", "Peru", "Philippines", "Poland", "Portugal",
            "Qatar",
            "Romania", "Russia", "Rwanda",
            "Saint Kitts and Nevis", "Saint Lucia", "Saint Vincent and the Grenadines", "Samoa", "San Marino", "Sao Tome and Principe", "Saudi Arabia", "Senegal", "Serbia", "Seychelles", "Sierra Leone", "Singapore", "Slovakia", "Slovenia", "Solomon Islands", "Somalia", "South Africa", "South Korea", "South Sudan", "Spain", "Sri Lanka", "Sudan", "Suriname", "Switzerland", "Syria",
            "Taiwan", "Tajikistan", "Tanzania", "Thailand", "Timor-Leste", "Togo", "Tonga", "Trinidad and Tobago", "Tunisia", "Turkey", "Turkmenistan", "Tuvalu",
            "Uganda", "Ukraine", "United Arab Emirates", "United Kingdom", "United States of America", "Uruguay", "Uzbekistan",
            "Vanuatu", "Venezuela", "Vietnam",
            "Yemen",
            "Zambia", "Zimbabwe"
        ];

        function populateCountries(selectId) {
            const select = document.getElementById(selectId);
            if (!select) return;

            // Keep existing priority options (first 4: disabled prop, √Öland, Finland, Sweden)
            // We assume the HTML structure has these first. 
            // We'll append a separator and then the rest.

            const separator = document.createElement('option');
            separator.disabled = true;
            separator.textContent = "-----------------";
            select.appendChild(separator);

            allCountries.forEach(country => {
                // Skip if already in priority list to avoid dups (simple check)
                if (['Finland', 'Sweden'].includes(country)) return;
                // √Öland is not in standard lists usually, so safe.

                const option = document.createElement('option');
                option.value = country;
                option.textContent = country;
                select.appendChild(option);
            });
        }
    </script>
    <script src="js/page-booking.js"></script>
</body>

</html>